<!DOCTYPE html>
<html>
  <head>
    <title>React / Redux</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body {
        font-family: 'Droid Serif';
        background-color: #D7D8D2;
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      img {
        width: 100%;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1 {
        color: #f3f3f3;
      }
      .inverse a {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      textarea {
        display: none;
      }

    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle, inverse

# React + redux

Elevate 14 april 2016

---

# whoarewe

### John
- JavaScript developer
- [@johnste](https://github.com/johnste) on github
- Using React and Redux since late 2015

### Pontus
- Frontend/JavaScript developer
- [@hontas](https://github.com/hontas) on github
- Reacter since summer 2015

---

# whoareyou

- JavaScript?
- ES6?
- Frontend?
- React?

---

# Agenda

### - Basic ES6 (ES2015)
### - React fundamentals
### - Redux
### - Example app

---

class: center, middle, inverse

# ES6

---

# ES6 - let/const
*proudly presented in block scope*

```javascript
if (true) {
  let a = 5;
}
a += 4; // ReferenceError: a is not defined

const x = 5;
x = 6; // TypeError
```

---

# ES6 - arrow function

```javascript
this.count = 0;
var that = this;

setInterval(function() {
  that.count++;
}, 1000);
```

```javascript
this.count = 0;

setInterval(() => {
  this.count++;
}, 1000);
```

---

# ES6 - template literals

```javascript
// Multiline strings
const kind = "templated"
const docs = `Hey, this is a ${kind} string`
```

---


# ES6 - default/rest parameters

```javascript
function sayHello(name) {
  name = typeof name !== 'undefined' || 'Jontus Doe';
  var rest = [].slice.call(arguments, 1);
  return 'Hello ' + name + '. Rest: ' + rest.join(', ');
}
```

```javascript
function sayHello(name = 'Johntus Doe', ...rest) {
  return `Hello ${name}. Rest: ${rest.join(', ')}`;
}
```

```javascript
> sayHello('Pontohn', 'red', 'blue')
"Hello Pontohn. Rest: red, blue"
```

---

# ES6 - object literals

```javascript
var url = 'http://...';
var key = 'a key';

var api = {
  url: url,
  putJSON: function () { ... },
};

// Have to assign key after
api[key] = 'a value';
```

```javascript
const url = 'http://...';
const api = {
  url,
  putJson() { ... },
  [key]: 'a value'
};
```
---

# ES6 - destructuring

```javascript
var point = getPoint();
var x = point.x;
var y = point.y;
```

```javascript
const { x, y } = getPoint();
```


---

# ES6 - classes

```javascript
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }
}
```

---

# ES6 - modules

```javascript
// exporting
module.exports = function React() {};
module.exports.PropTypes = {};

// importing
var React = require('react');
var PropTypes = React.PropTypes;
```

```javascript
// exporting
export default function React() (};
export const PropTypes = {};

// importing
import React, { PropTypes } from 'react';
```

---
# ESX - object spread operator (stage 2 proposal)

```javascript
var default = {
  url: 'http://example.com',
  active: false
};

var options = Object.assign({}, defaults, { active: true });

options.url === 'http://example.com'
options.active === true

```

```javascript
const default = {
  url: 'http://example.com',
  active: false
}

const options = { ...defaults, active: true };
```

---

class: center, middle, inverse

# React

---

# React fundamentals

- *Ember* - full MVC
- *Angular* - everything and a kitchen sink
- *React* - only view layer

What problems is it solving?

[DOM manipulation comparison](https://www.youtube.com/watch?v=z5e7kWSHWTg)

---

# React fundamentals - JSX

- superset of JS
- opt in
- paves the way for ES6

```javascript

render() {
  return (
    <form className="sign-in-form">
      <label htmlFor="email">Email</label>
      <input type="email" id="email" />
      <button onClick={ this.onHandleClick }>Click me!</button>
    </form>
  );
}
```

- `className`
- `htmlFor`
- `events`
- `{ js here }`

---

# React fundamentals - Vanilla JS

```javascript
"use strict";

render() {
  return (
    React.createElement(
      "form",
      { className: "sign-in-form" },
      React.createElement(
        "label",
        { htmlFor: "email" },
        "Email"
      ),
      React.createElement("input", { type: "email", id: "email" }),
      React.createElement(
        "button",
        { onClick: this.onHandleClick },
        "Click me!"
      )
    );
  );
}
```

---

# React fundamentals - Hello world

```javascript
import React from 'react'; // needed in transpilation
import { render } from 'react-dom';
import HelloWorld from './helloWorld.jsx';

render(
  <HelloWorld />,
  document.getElementById('container')
);
```

```javascript
// helloWorld.jsx
import React from 'react';

export default () => {
  return <h1>Hello, world!</h1>;
}
```

---

# React fundamentals - Component

```javascript
// stateful component
export default React.createClass({
  getInitialState() {
    return { name: 'John' };
  },
  render() {
    return <div>Hello { this.state.name }</div>;
  }
});
```

```javascript
// stateful component class
export default class MyComponent extends React.Component {
  constructor() {
    this.state = { name: 'John' };
  }
  render() {
    return <div>Hello { this.state.name }</div>;
  }
});
```
---

# React fundamentals - State vs Props

- Immutability
- Stateless/Pure components
- Present data
- Always rerender!

### Always be using props!

except...

```javascript
export default InputField = React.createClass({
  onChange(evt) {
    this.setState({ value: evt.target.value });
  },
  render() {
    return <input onChange={ this.onChange } value={ this.state.value } />
  }
});
```

---

# React fundamentals - Lifecycle methods

```javascript

export default React.createClass({
  // Set initial state
  getInitialState() {},

  // Mounting
  componentWillMount() {},
  componentDidMount() {},
  componentWillUnmount() {},

  // A property has changed?
  componentWillReceiveProps() {},

  // Component update
  shouldComponentUpdate() {},
  componentWillUpdate() {},
  componentDidUpdate() {},

  // Render!
  render() {}
});

```

---

# React fundamentals - Stateless and Pure Components

```javascript
// stateless component
export default React.createClass({
  render() {
    return <div>Hello { this.props.name }</div>;
  }
});
```

```javascript
// pure component
export default (props) => {
    return <div>Hello { props.name }</div>;
}
```

---

class: center, middle, inverse

# Redux

---

# Redux

Managing data, the M of MVC
- Backbone model
- Flux

---

# Redux - Flux to the resque!

- Unidirectional data flow

![flux](https://docs.google.com/drawings/d/1VGR2SCceyl22rUi92vqP1ttGcpBPmoBLGknCG7dMmL0/pub?w=959&h=357)

---

# Redux - ~~Flux to the resque!~~

- Store hell & waitFor or wtf.

![flux](https://docs.google.com/drawings/d/1oNW3w6RdnLJna8wSE8T01moKMqD5XlQ024-Onukvs_g/pub?w=959&h=357)

---

# Redux - Redux

- Predictable state container

![redux](https://docs.google.com/drawings/d/1_1CtFfIH7zqfNSO3Cl2mI7iYa5zAKodiuKY2JGIZfE0/pub?w=959&h=357)

---

# Redux - Redux

- Scales well

![redux](https://docs.google.com/drawings/d/1zn2arct1NehY0r2N5x5lnZ00-UWHLv0YrUPPSXBap-4/pub?w=959&h=357)

---

# Redux - Parts

### - Action creators
### - Reducers
### - Store

---

# Redux - Action creators

Describe change intent

```javascript
export function getCats(catType) {
  return {
    type: 'GET_CATS',
    catType
  };
}
```
---

# Redux - Reducers

Mutation by pure function

```javascript
export function catReducer(state = {}, action) {
  switch(action.type) {
    case 'GET_CATS':
      return {
        ...state,
        futureCatType: action.catType,
        isLoadingCats: true
      };
    default:
      return state;
  }
}
```

---

# Redux - Store

```javascript
import { createStore, combineReducers } from 'redux';
import { catReducer } from '../reducers';

const initialState = {};
const rootReducer = combineReducers({
  cats: catReducer
});

const store = createStore(
  rootReducer,
  initialState
);

export default store;

```

---

# Redux - Hello Redux

```javascript
import React from 'react';
import { render } from 'react-dom';
import { Provider } from 'react-redux';

import store from './store';
import Application from './application.jsx';

render(
  <Provider store={ store }>
    <Application />
  </Provider>,
  document.getElementById('container')
);
```
---

# Redux - Connected components

Deeply nested state

```javascript
<Application >
  <Header />
  <main>
    <Article />
    <aside>
      <ArticlesList />
    </aside>
  </main>
  <Footer />
</Application>
```

passthrough or...?

---

# Redux - Connected components

```javascript
import { getCats } from './actions';

const MyComponent = ({cats = [], dispatch}) => {

  function onClick() {
    dispatch(getCats());
  }

  return (
    <div>
      <ul>
        { cats.map(cat => <li>{cat}</li>) }
      </ul>

      <button onClick={onClick}>Get some cats</button>
    </div>
  );
};

function mapStateToProps({ cats }) {
  return {
    cats: cats.allCats,
    isYourFavoriteCat: cats.futureCatType === 'norsk bonnkatt'
  };
}

export default connect(mapStateToProps)(MyComponent);

```
---

class: center, middle, inverse

# Example app

Demo

???

- errors in window
- hmr
- propType validation

---

# Links

- [These slides](http://johnste.github.io/react-redux-presentation)
- [Learn ES6](http://babeljs.io/docs/learn-es2015/)
- [React + Webpack cookbook](http://survivejs.com/webpack/introduction/)
- [Redux documentation](http://redux.js.org/docs/introduction/index.html)
- [Getting started with redux video series](https://egghead.io/series/getting-started-with-redux)

### Further reading
- [pokedex](http://www.pocketjavascript.com/blog/2015/11/23/introducing-pokedex-org)

### React alternatives
- [preact](https://github.com/developit/preact)
- [cycle.js](http://cycle.js.org/)
- [elm](http://elm-lang.org/)

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js"></script>
    <script>
      var slideshow = remark.create({
        ratio: '16:9',
        navigation: { scroll: false },
        highlightLanguage: 'javascript',
        highlightStyle: 'monokai'
      });
    </script>
  </body>
</html>
